<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0e27">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="مفكرة القاضي — تطبيق ذكي لإدارة المبادئ القانونية والسوابق القضائية">
  <meta name="author" content="مستشار/ أحمد وجيه">

  <title>مفكرة القاضي — JuriNotebook</title>

  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&family=Noto+Kufi+Arabic:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">


  <!-- Firebase SDK (compat — CDN, no build tools needed) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

  <!-- QR Code Generator -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <!-- ══════ Auth Screen ══════ -->
  <div id="auth-screen" class="auth-screen">
    <div class="auth-container">
      <div class="auth-brand">
        <img src="icons/icon-192.png" alt="JuriNotebook" class="auth-logo">
        <h1>مفكرة القاضي</h1>
        <p class="auth-brand-en">JuriNotebook</p>
        <p class="auth-tagline">إدارة ذكية للمبادئ القانونية والسوابق القضائية</p>
      </div>

      <!-- Login Form -->
      <div class="auth-card glass-card" id="auth-login-form">
        <h2>تسجيل الدخول</h2>

        <button class="btn-google" onclick="LexiApp.signInWithGoogle()">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path
              d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"
              fill="#4285F4" />
            <path
              d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
              fill="#34A853" />
            <path
              d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
              fill="#FBBC05" />
            <path
              d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
              fill="#EA4335" />
          </svg>
          <span>الدخول بحساب جوجل</span>
        </button>

        <div class="auth-divider">
          <span>أو</span>
        </div>

        <form onsubmit="LexiApp.handleEmailLogin(event)">
          <div class="form-group">
            <input class="form-input" type="email" id="auth-email" placeholder="البريد الإلكتروني" required>
          </div>
          <div class="form-group">
            <input class="form-input" type="password" id="auth-password" placeholder="كلمة المرور" required
              minlength="6">
          </div>
          <button type="submit" class="btn btn-primary" style="width:100%">دخول</button>
        </form>

        <p class="auth-switch">
          ليس لديك حساب؟
          <a href="#" onclick="LexiApp.showRegister()">إنشاء حساب جديد</a>
        </p>

        <button class="btn btn-ghost btn-sm" style="width:100%;margin-top:8px" onclick="LexiApp.skipAuth()">
          متابعة بدون حساب (وضع محلي)
        </button>
      </div>

      <!-- Register Form -->
      <div class="auth-card glass-card hidden" id="auth-register-form">
        <h2>إنشاء حساب جديد</h2>

        <form onsubmit="LexiApp.handleEmailRegister(event)">
          <div class="form-group">
            <input class="form-input" type="text" id="reg-name" placeholder="الاسم" required>
          </div>
          <div class="form-group">
            <input class="form-input" type="email" id="reg-email" placeholder="البريد الإلكتروني" required>
          </div>
          <div class="form-group">
            <input class="form-input" type="password" id="reg-password" placeholder="كلمة المرور (6 أحرف على الأقل)"
              required minlength="6">
          </div>
          <button type="submit" class="btn btn-primary" style="width:100%">إنشاء حساب</button>
        </form>

        <p class="auth-switch">
          لديك حساب بالفعل؟
          <a href="#" onclick="LexiApp.showLogin()">تسجيل الدخول</a>
        </p>
      </div>

      <div class="auth-footer">
        <p>© مستشار/ أحمد وجيه — جميع حقوق الملكية الفكرية محفوظة</p>
      </div>
    </div>
  </div>

  <!-- ══════ Main App ══════ -->
  <div id="app-wrapper" class="app-wrapper hidden">
    <div class="app-container">
      <!-- Sidebar Overlay (Mobile) -->
      <div class="sidebar-overlay" id="sidebar-overlay"></div>

      <!-- Sidebar (Desktop) -->
      <aside class="sidebar" id="sidebar">
        <!-- Rendered by JS -->
      </aside>

      <!-- Main Content -->
      <main class="main-content" id="main-content">
        <!-- Rendered by JS -->
      </main>
    </div>

    <!-- Bottom Nav (Mobile Only) -->
    <nav class="bottom-nav" id="bottom-nav">
      <button class="bottom-nav-item active" data-view="home" onclick="LexiApp.navigate('home')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" />
        </svg>
        <span>الرئيسية</span>
      </button>
      <button class="bottom-nav-item" data-view="add" onclick="LexiApp.navigate('add')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        <span>إضافة</span>
      </button>
      <button class="bottom-nav-item" data-view="settings" onclick="LexiApp.navigate('settings')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3" />
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
        </svg>
        <span>الإعدادات</span>
      </button>
    </nav>

    <!-- FAB — Mobile Quick Add -->
    <button class="fab" id="fab" onclick="LexiApp.navigate('add')" title="إضافة مبدأ جديد">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <line x1="12" y1="5" x2="12" y2="19" />
        <line x1="5" y1="12" x2="19" y2="12" />
      </svg>
    </button>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal-content">
      <!-- Rendered by JS -->
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Copyright Watermark -->
  <div class="copyright-bar" id="copyright-bar">
    © مستشار/ أحمد وجيه — جميع حقوق الملكية الفكرية محفوظة | JuriNotebook v1.0
  </div>

  <!-- Scripts -->
  <script src="js/firebase-config.js"></script>
  <script src="js/db.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>

</html>